<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WORLD MACHINE</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Genos:ital,wght@0,100;0,400;0,700;1,400&family=VT323&display=swap"
        rel="stylesheet" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css" />

    <!-- THREE.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Expose World Machine to the global scope -->
    <script type="text/javascript">
        let worldMachine;
    </script>

    <!-- Load Config -->
    <script src="./src/util/Types.js"></script> <!-- Load Types -->
    <script src="./config/Script.js"></script> <!-- Load Script -->
    <script src="./config/Questions.js"></script> <!-- Load Questions -->

    <!-- Load Modules -->
    <script type="module" src="./src/struct/EventBlock.js"></script> <!-- Load EventBlock -->
    <script type="module" src="./src/struct/Action.js"></script> <!-- Load Action -->
    <script type="module" src="./src/EventProcessor.js"></script> <!-- Load EventProcessor -->
    <script type="module" src="./src/QuestionManager.js"></script> <!-- Load QuestionManager -->
    <script type="module" src="./src/UIManager.js"></script> <!-- Load UIManager -->
    <script type="module" src="./src/UI/Animation.js"></script> <!-- Load Animations -->
    <script type="module" src="./src/Context.js"></script> <!-- Load Context -->

    <!-- Main Script -->
    <script type="module" src="./WorldMachine.js"></script>
</head>
<body>
    <!-- Scanlines overlay effect -->
    <div class="scanlines"></div>

    <!-- Main content container (left column) -->
    <div class="container">
        <header>
            <h1>WORLD MACHINE</h1>
            <p class="subtitle">speculative worldbuilding engine</p>
        </header>

        <!-- Status indicators -->
        <div class="status-bar">
            <div class="status-item">
                <div id="status-system" class="status-led"></div>
                <span>System</span>
            </div>
            <div class="status-item">
                <div id="status-area" class="status-led"></div>
                <span>Active Zone</span>
            </div>
            <div class="status-item">
                <div id="status-mode" class="status-led"></div>
                <span>Machine Mode</span>
            </div>
            <div class="status-item">
                <div id="counter-rounds">Rounds: 0/5</div>
            </div>
        </div>

        <!-- Main control buttons -->
        <div class="control-panel">
            <button id="btn-initialize">Initialize</button>
            <button id="btn-area" disabled>Generate Zone</button>
            <button id="btn-question" disabled>Generate Question</button>
            <button id="btn-hint" disabled>Macromatrix</button>
        </div>

        <!-- ASCII animation -->
        <div id="ascii-animation"></div>

        <!-- Main output console -->
        <div class="console" id="console-output"></div>

        <!-- Displays current zone info -->
        <div id="current-area" class="area-info" style="display: none"></div>
        <!-- Displays current zone description -->
        <div id="area-description" class="area-description" style="display: none"></div>
        <!-- Displays Macromatrix hints -->
        <div id="macromatrix-hint" class="hint" style="display: none"></div>

        <!-- Session history section -->
        <div class="history">
            <h2>Session History</h2>
            <div id="history-log"></div>
        </div>
    </div>

    <!-- Matrix container (right column) -->
    <div class="matrix-container">
        <details open="">
            <summary class="matrix-title">INTERNAL MATRIX</summary>
            <div class="matrix-content">
                <!-- 3D visualization canvas -->
                <div id="matrix3d"></div>
                <!-- Matrix input controls -->
                <div class="matrix-controls">
                    <input 
                        type="text" 
                        class="matrix-input" 
                        placeholder="Enter your response..." 
                        id="matrix-input" 
                    />
                    <button class="matrix-submit" id="matrix-submit">Submit</button>
                </div>
                <!-- Matrix data log -->
                <div class="matrix-data" id="matrix-data"></div>
            </div>
        </details>
    </div>

    <!-- Footer -->
    <footer>
      <p>WORLD MACHINE Â© 2025 | Eternal Engine</p>
    </footer>
  </body>
</html>